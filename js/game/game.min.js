define("Game",[],function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){var Engine=__webpack_require__(8),Vector=__webpack_require__(2),ImageObject=__webpack_require__(4).ImageObject,ImageLoading=__webpack_require__(4).ImageLoading,Box=__webpack_require__(3).Box,Polygon=__webpack_require__(3).Polygon,GraphicsContext=__webpack_require__(1),InputClass=__webpack_require__(5),UIClass=__webpack_require__(12),Timer=__webpack_require__(6),colliDetect=__webpack_require__(9),BarrierGenerator=__webpack_require__(11),Barriers=__webpack_require__(7),Game={init:function(canvasId){function resetGame(){g_GameObjectAx=-1,g_GameObjectAxDelta=1e-5,gameRecord>highestGameRecord&&(highestGameRecord=gameRecord),gameRecord=0,gameRecordCoef=10.5,gameTime=0;for(var i=0;i<barriersVisible.length;i++)barriersVisible[i].resetFlagAndPos(GraphicsContext.width(),0);barriersVisible=[],BarrierGenerator.reset(),isStop=!0,Timer.stop()}Engine.init(canvasId),Barriers.init();var gameSkyWidth=1257,gameSkyHeight=400,backSkyPosX=gameSkyWidth-27,gameSkys=[new ImageObject(0,0,gameSkyWidth,gameSkyHeight),new ImageObject(backSkyPosX,0,gameSkyWidth,gameSkyHeight)],frontSky=gameSkys[0],backSky=gameSkys[1];frontSky.addImageFrame("res/Background/Sky.jpg"),backSky.addImageFrame("res/Background/Sky.jpg");for(var spriteCenterY,spriteCenterX,spriteWidth=220,spriteHeight=80,spriteTopLeftPos=new Vector(.05*GraphicsContext.width(),0),spriteAngle=0,spriteAy=0,spriteAyCoef=3.3,spriteBoundingPoints=[new Vector(91,11),new Vector(119,8),new Vector(133,21),new Vector(172,21),new Vector(204,22),new Vector(221,27),new Vector(236,39),new Vector(223,51),new Vector(207,58),new Vector(168,59),new Vector(134,59),new Vector(120,71),new Vector(91,69),new Vector(107,57),new Vector(105,24)],spriteBoundingBox=new Box(spriteTopLeftPos,spriteWidth,spriteHeight),spriteBounding=new Polygon(spriteBoundingPoints,spriteTopLeftPos,spriteBoundingBox),gameSprite=new ImageObject(spriteTopLeftPos.x,spriteTopLeftPos.y,spriteWidth,spriteHeight,spriteBounding),spriteFrames=["res/Sprite/1.png","res/Sprite/2.png","res/Sprite/3.png","res/Sprite/4.png","res/Sprite/3.png","res/Sprite/2.png","res/Sprite/1.png"],i=0;i<spriteFrames.length;i++)gameSprite.addImageFrame(spriteFrames[i]);var g_GameObjectAx=-1,g_GameObjectAxDelta=1e-5,gameRecord=0,gameRecordCoef=10,highestGameRecord=0,gameTime=0,barriersVisible=[],isStop=!0,roundCount=0;Engine.start(function(){if(0!==InputClass.clickCount&&(isStop=!1),GraphicsContext.clearCanvas(),mouseX=InputClass.mouseX,mouseY=InputClass.mouseY,spriteCenterY=gameSprite.getCenterY(),spriteCenterX=gameSprite.getCenterX(),mouseY!=spriteCenterY&&(spriteAy=(mouseY-spriteCenterY)*spriteAyCoef/GraphicsContext.height()),spriteAy+=g_GameObjectAxDelta,spriteAngle=Math.atan((mouseY-spriteCenterY)/(mouseX-spriteCenterX))*(180/Math.PI)*.025,gameSprite.update(spriteAngle,0,spriteAy),gameSprite.draw(),GraphicsContext.setGlobalComposition("destination-over"),frontSky.update(0,g_GameObjectAx,0),frontSky.draw(),backSky.update(0,g_GameObjectAx,0),backSky.draw(),backSky.x<=0){var tmp=frontSky;frontSky=backSky,backSky=tmp,backSky.x=backSkyPosX}if(GraphicsContext.setGlobalComposition("source-over"),Barriers.BarrierLoading.isDone()&&ImageLoading.isDone())if(isStop)0===roundCount?UIClass.showPauseScene():UIClass.showRestartScene(highestGameRecord);else{Timer.isRunning()||(Timer.start(),roundCount++),gameTime=Timer.totalTime(),gameRecord=parseInt(gameTime*gameRecordCoef),g_GameObjectAx-=g_GameObjectAxDelta,BarrierGenerator.setLevel(gameRecord);var thisBarrier=BarrierGenerator.getThisBarrier(gameTime,g_GameObjectAx);null!==thisBarrier&&barriersVisible.push(thisBarrier);for(var i=0;i<barriersVisible.length;i++)barriersVisible[i].x+barriersVisible[i].width<0&&(barriersVisible[i].resetFlagAndPos(GraphicsContext.width(),0),barriersVisible.splice(i,1)),"undefined"==typeof barriersVisible[i]&&console.log(i,barriersVisible,barriersVisible[i]),barriersVisible[i].r+=barriersVisible[i].dr,barriersVisible[i].update(barriersVisible[i].r,barriersVisible[i].ax,barriersVisible[i].ay),barriersVisible[i].draw(),barriersVisible[i].x<=gameSprite.x+gameSprite.width&&colliDetect.detect(gameSprite.bounding,barriersVisible[i].bounding)&&Engine.reset(resetGame);UIClass.showGameRecord(gameRecord,highestGameRecord)}else UIClass.showLoadingScene()})}};module.exports=Game},function(module,exports){var GraphicsContext={_canvas:null,canvasCtx:null,init:function(canvasId){if(this._canvas=document.getElementById(canvasId),!this._canvas)throw Error("Can not find the canvas with the id!");this.canvasCtx=this._canvas.getContext("2d")},width:function(){return this._canvas.clientWidth},height:function(){return this._canvas.clientHeight},offsetTop:function(){return this._canvas.offsetTop},offsetLeft:function(){return this._canvas.offsetLeft},canvas:function(){return this._canvas},clearCanvas:function(){this.canvasCtx.clearRect(0,0,this.width(),this.height())},drawImage:function(imgFrames,x,y,width,height){return this.canvasCtx.drawImage(imgFrames,x,y,width,height)},drawCircle:function(circle,color){this.canvasCtx.beginPath(),this.canvasCtx.arc(circle.center.x,circle.center.y,circle.r,0,2*Math.PI),this.canvasCtx.fillStyle=color,this.canvasCtx.fill()},drawPolygon:function(poly,color){this.canvasCtx.beginPath();for(var i=0;i<poly.points.length;i++)0===i&&this.canvasCtx.moveTo(poly.points[i].x,poly.points[i].y),this.canvasCtx.lineTo(poly.points[i].x,poly.points[i].y),i===poly.points.length-1&&this.canvasCtx.lineTo(poly.points[poly.points.length-1].x,poly.points[poly.points.length-1].y);this.canvasCtx.fillStyle=color,this.canvasCtx.fill(),this.canvasCtx.closePath()},translate:function(x,y){return this.canvasCtx.translate(x,y)},rotate:function(angle){return this.canvasCtx.rotate(angle)},scale:function(x,y){return this.canvasCtx.scale(x,y)},transfrom:function(a,b,c,d,e,f){return this.canvasCtx.transfrom(a,b,c,d,e,f)},save:function(){return this.canvasCtx.save()},restore:function(){return this.canvasCtx.restore()},setGlobalComposition:function(type){this.canvasCtx.globalCompositeOperation=type}};module.exports=GraphicsContext},function(module,exports){var Vector=function(x,y){this.x=x||0,this.y=y||0};Vector.prototype.dot=function(v){return this.x*v.x+this.y*v.y},Vector.prototype.len2=function(){return this.dot(this)},Vector.prototype.len=function(){return Math.sqrt(this.len2())},Vector.prototype.copy=function(v){return this.x=v.x,this.y=v.y,this},Vector.prototype.clone=function(){return new Vector(this.x,this.y)},Vector.prototype.perp=function(){var x=this.x;return this.x=this.y,this.y=-x,this},Vector.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},Vector.prototype.translate=function(x,y){return this.x+=x,this.y+=y,this},Vector.prototype.rotate=function(angle){var radian=angle*(Math.PI/180),x=this.x;return this.x=this.x*Math.cos(radian)+this.y*Math.sin(radian),this.y=-x*Math.sin(radian)+this.y*Math.cos(radian),this},Vector.prototype.scale=function(sx,sy){return this.x*=sx,this.y*=sy||sx,this},Vector.prototype.normalize=function(){var d=this.len();return d>0&&(this.x/=d,this.y/=d),this},Vector.prototype.add=function(v){return this.x+=v.x,this.y+=v.y,this},Vector.prototype.sub=function(v){return this.x-=v.x,this.y-=v.y,this},Vector.prototype.project=function(axis){var cof=this.dot(axis)/axis.len2();return axis.scale(cof)},Vector.prototype.projectN=function(axis){var cof=this.dot(axis);return axis.scale(cof)},module.exports=Vector},function(module,exports,__webpack_require__){var Vector=__webpack_require__(2),Circle=function(centerV,r){this.center=centerV,this.r=r};Circle.prototype.translate=function(x,y){return this.center.translate(x,y),this},Circle.prototype.scale=function(scalar){return this.r*=scalar,this};var Box=function(topLeftPosV,w,h){this.points=[new Vector(topLeftPosV.x,topLeftPosV.y),new Vector(topLeftPosV.x+w,topLeftPosV.y),new Vector(topLeftPosV.x+w,topLeftPosV.y+h),new Vector(topLeftPosV.x,topLeftPosV.y+h)],this.topLeftPos=topLeftPosV,this.w=w,this.h=h};Box.prototype._getCenter=function(){return new Vector((this.points[0].x+this.points[2].x)/2,(this.points[0].y+this.points[2].y)/2)},Box.prototype.translate=function(x,y){return this.points.map(function(e){return e.translate(x,y)}),this},Box.prototype.rotate=function(angle){var center=this._getCenter(),cx=center.x,cy=center.y;return this.translate(-cx,-cy),this.points.map(function(e){return e.rotate(angle)}),this.translate(cx,cy),this},Box.prototype.scale=function(x,y){var center=this._getCenter(),cx=center.x,cy=center.y;return this.translate(-cx,-cy),this.points.map(function(e){return e.scale(x,y)}),this.translate(cx,cy),this};var Polygon=function(points,topLeftPosV,box){if(this._totalRotation=0,this.points=points,"undefined"!=typeof box)this.box=box;else{for(var minX=4294967295,minY=4294967295,maxX=0,maxY=0,w=0,h=0,i=0;i<points.length;i++)points[i].x<minX&&(minX=points[i].x),points[i].y<minY&&(minY=points[i].y),points[i].x>maxX&&(maxX=points[i].x),points[i].y>maxY&&(maxY=points[i].y);w=maxX-minX,h=maxY-minY,this.box=new Box(new Vector(minX,minY),w,h)}this.translate(-this.box.points[0].x,-this.box.points[0].y),this.translate(topLeftPosV.x,topLeftPosV.y)};Polygon.prototype._getCenter=function(){return this.box._getCenter()},Polygon.prototype.translate=function(x,y){return this.points.map(function(e){return e.translate(x,y)}),this.box.translate(x,y),this},Polygon.prototype.rotate=function(angle){this._totalRotation+=angle;var center=this._getCenter(),cx=center.x,cy=center.y;this.translate(-cx,-cy),this.points.map(function(e){return e.rotate(angle)}),this.box.rotate(angle),this.translate(cx,cy)},Polygon.prototype.clearRotation=function(){this.rotate(-this._totalRotation)},Polygon.prototype.scale=function(x,y){var center=this._getCenter(),cx=center.x,cy=center.y;return this.translate(-cx,-cy),this.points.map(function(e){return e.scale(x,y)}),this.box.scale(x,y),this.translate(cx,cy),this},module.exports={Circle:Circle,Box:Box,Polygon:Polygon}},function(module,exports,__webpack_require__){function ImageObject(x,y,width,height,poly){this.imgFrames=[],this.imgIndex=0,this.thisImgFrame=this.imgFrames[this.imgIndex],this.x=x||0,this.y=y||0,this.width=width||0,this.height=height||0,this.bounding=poly||null,this.ax=0,this.ay=0,this.r=0,this.dr=0,this.used=!1,this.flags=[]}var GraphicsContext=__webpack_require__(1),ImageLoading={_imageNum:0,_imageLoaded:0,isDone:function(){return this._imageLoaded===this._imageNum},addNum:function(){this._imageNum++},addLoaded:function(){this._imageLoaded++}};ImageObject.prototype.addImageFrame=function(url){ImageLoading.addNum();var tmpImg=new Image;tmpImg.src=url,this.imgFrames.push(tmpImg),tmpImg.addEventListener("load",function(){ImageLoading.addLoaded()})},ImageObject.prototype.update=function(angle,ax,ay){this.x+=ax,this.y+=ay,this.imgIndex=(this.imgIndex+1)%this.imgFrames.length,this.thisImgFrame=this.imgFrames[this.imgIndex],GraphicsContext.save(),GraphicsContext.translate(this.getCenterX(),this.getCenterY()),GraphicsContext.rotate(angle),GraphicsContext.translate(-this.getCenterX(),-this.getCenterY()),null!==this.bounding&&void 0!==this.bounding&&(this.bounding.clearRotation(),this.bounding.rotate(-angle*(180/Math.PI)),this.bounding.translate(ax,ay))},ImageObject.prototype.draw=function(){GraphicsContext.drawImage(this.thisImgFrame,this.x,this.y,this.width,this.height),GraphicsContext.restore()},ImageObject.prototype.getCenterX=function(){return this.x+this.width/2},ImageObject.prototype.getCenterY=function(){return this.y+this.height/2},ImageObject.prototype.resetFlagAndPos=function(x,y){this.used=!1,this.setX(x),this.setY(y),this.r=0,this.ax=0,this.ay=0},ImageObject.prototype.setX=function(x){this.x=x,null!==this.bounding&&(this.bounding.clearRotation(),this.bounding.translate(-this.bounding.box.points[0].x,0),this.bounding.translate(x,0))},ImageObject.prototype.setY=function(y){this.y=y,null!==this.bounding&&(this.bounding.clearRotation(),this.bounding.translate(0,-this.bounding.box.points[0].y),this.bounding.translate(0,y))},module.exports={ImageLoading:ImageLoading,ImageObject:ImageObject}},function(module,exports,__webpack_require__){var GraphicsContext=__webpack_require__(1),Vector=__webpack_require__(2),InputClass={_mouseMove:!1,_mouseX:0,_mouseY:0,_lastMouseX:0,_lastMouseY:0,_keys:[],_keyDown:[],get mouseX(){return this._mouseX},get mouseY(){return this._mouseY},_clickCount:0,_lastClick:new Vector,get clickCount(){return this._clickCount},get lastClick(){return this._lastClick},_addMouseEvents:function(){document.addEventListener("mousemove",function(event){var canvasOffsetLeft=GraphicsContext.canvas().getBoundingClientRect().left,canvasOffsetTop=GraphicsContext.canvas().getBoundingClientRect().top;InputClass._mouseMove?(InputClass._mouseX=event.clientX-canvasOffsetLeft,InputClass._mouseY=event.clientY-canvasOffsetTop,InputClass._lastMouseX=InputClass._mouseX,InputClass._lastMouseY=InputClass._mouseY):(InputClass._mouseX=InputClass._lastMouseX,InputClass._mouseY=InputClass._lastMouseY)}),GraphicsContext.canvas().addEventListener("mouseenter",function(event){InputClass._mouseMove=!0}),GraphicsContext.canvas().addEventListener("mouseout",function(event){InputClass._mouseMove=!1}),GraphicsContext.canvas().addEventListener("click",function(event){InputClass._clickCount++,InputClass._lastClick.x=InputClass._mouseX,InputClass._lastClick.y=InputClass._mouseY})},addKey:function(keyCode){this._keys.indexOf(keyCode)===-1&&(this._keys.push(keyCode),this._keyDown[keyCode]=0)},keyPressedCount:function(keyCode){return this._keyDown[keyCode]},init:function(withMouseEvents){withMouseEvents=withMouseEvents||!0,withMouseEvents&&this._addMouseEvents(),document.addEventListener("keydown",function(e){var code=e.keyCode||e.which;InputClass._keys.indexOf(code)!==-1&&InputClass._keyStates[code]++}),document.addEventListener("keyup",function(e){var code=e.keyCode||e.which;InputClass._keys.indexOf(code)!==-1&&InputClass._keyStates[code]++})},resetClicks:function(){this._clickCount=0,this._lastClick=new Vector}};module.exports=InputClass},function(module,exports){var Timer={_totalTime:0,_isPaused:!0,_isStopped:!0,start:function(){this._isStopped&&(this._isPaused=!1,this._isStopped=!1,this._totalTime=0)},tick:function(){this._isPaused||this._isStopped||this._totalTime++},pause:function(){this._isPaused=!0},resume:function(){this._isPaused=!1},stop:function(){this._isStopped=!0},totalTime:function(){return this._totalTime},isRunning:function(){return!this._isStopped}};module.exports=Timer},function(module,exports,__webpack_require__){var GraphicsContext=__webpack_require__(1),Vector=__webpack_require__(2),Box=__webpack_require__(3).Box,Polygon=__webpack_require__(3).Polygon,ImageObject=__webpack_require__(4).ImageObject,Barriers={_barriersCount:11,get barriersCount(){return this._barriersCount},_barriersList:[],get barriersList(){return this._barriersList},BarrierLoading:{isDone:function(){return Barriers.barriersList.length===Barriers.barriersCount}},init:function(){for(var barriersStartingTopLeftPos=new Vector(GraphicsContext.width()+1,0),barrierWidth=65,barrierHeight=85,barrierBoundingPoints=[new Vector(4,21),new Vector(20,1),new Vector(28,0),new Vector(39,10),new Vector(59,26),new Vector(64,45),new Vector(57,64),new Vector(53,66),new Vector(52,74),new Vector(48,76),new Vector(36,74),new Vector(25,83),new Vector(12,81),new Vector(0,58),new Vector(2,42)],i=0;i<barrierBoundingPoints.length;i++)barrierBoundingPoints[i].translate(barriersStartingTopLeftPos.x,0);var barrierBoundingBox=new Box(barriersStartingTopLeftPos,barrierWidth,barrierHeight),barrierBounding=new Polygon(barrierBoundingPoints,barriersStartingTopLeftPos,barrierBoundingBox),barrierFrames=["res/Barriers/1.png"],barrier=new ImageObject(barriersStartingTopLeftPos.x,barriersStartingTopLeftPos.y,barrierWidth,barrierHeight,barrierBounding);barrier.flags=[];for(var i=0;i<barrierFrames.length;i++)barrier.addImageFrame(barrierFrames[i]);Barriers.barriersList.push(barrier),barrierWidth=200,barrierHeight=200,barrierBoundingPoints=[new Vector(97,4),new Vector(140,13),new Vector(179,43),new Vector(198,98),new Vector(185,144),new Vector(151,183),new Vector(97,197),new Vector(49,184),new Vector(22,162),new Vector(3,106),new Vector(9,60),new Vector(40,25)];for(var i=0;i<barrierBoundingPoints.length;i++)barrierBoundingPoints[i].translate(barriersStartingTopLeftPos.x,0);barrierBoundingBox=new Box(barriersStartingTopLeftPos,barrierWidth,barrierHeight),barrierBounding=new Polygon(barrierBoundingPoints,barriersStartingTopLeftPos,barrierBoundingBox),barrierFrames=["res/Barriers/2.png"],barrier=new ImageObject(barriersStartingTopLeftPos.x,barriersStartingTopLeftPos.y,barrierWidth,barrierHeight,barrierBounding),barrier.flags=[];for(var i=0;i<barrierFrames.length;i++)barrier.addImageFrame(barrierFrames[i]);Barriers.barriersList.push(barrier),barrierWidth=100,barrierHeight=100,barrierBoundingPoints=[new Vector(48,0),new Vector(71,6),new Vector(93,26),new Vector(100,49),new Vector(93,75),new Vector(77,91),new Vector(50,98),new Vector(25,91),new Vector(10,80),new Vector(0,52),new Vector(8,25),new Vector(19,10)];for(var i=0;i<barrierBoundingPoints.length;i++)barrierBoundingPoints[i].translate(barriersStartingTopLeftPos.x,0);barrierBoundingBox=new Box(barriersStartingTopLeftPos,barrierWidth,barrierHeight),barrierBounding=new Polygon(barrierBoundingPoints,barriersStartingTopLeftPos,barrierBoundingBox),barrierFrames=["res/Barriers/4.png"],barrier=new ImageObject(barriersStartingTopLeftPos.x,barriersStartingTopLeftPos.y,barrierWidth,barrierHeight,barrierBounding),barrier.flags=[];for(var i=0;i<barrierFrames.length;i++)barrier.addImageFrame(barrierFrames[i]);Barriers.barriersList.push(barrier),barrierWidth=150,barrierHeight=172,barrierBoundingPoints=[new Vector(69,1),new Vector(75,1),new Vector(74,12),new Vector(78,44),new Vector(100,60),new Vector(128,51),new Vector(136,47),new Vector(149,57),new Vector(144,75),new Vector(103,120),new Vector(96,141),new Vector(67,171),new Vector(12,126),new Vector(0,107),new Vector(7,103),new Vector(29,98),new Vector(48,70),new Vector(48,65),new Vector(45,55),new Vector(49,30),new Vector(55,10)];for(var i=0;i<barrierBoundingPoints.length;i++)barrierBoundingPoints[i].translate(barriersStartingTopLeftPos.x,0);barrierBoundingBox=new Box(barriersStartingTopLeftPos,barrierWidth,barrierHeight),barrierBounding=new Polygon(barrierBoundingPoints,barriersStartingTopLeftPos,barrierBoundingBox),barrierFrames=["res/Barriers/5.png"],barrier=new ImageObject(barriersStartingTopLeftPos.x,barriersStartingTopLeftPos.y,barrierWidth,barrierHeight,barrierBounding),barrier.flags=[];for(var i=0;i<barrierFrames.length;i++)barrier.addImageFrame(barrierFrames[i]);Barriers.barriersList.push(barrier),barrierWidth=180,barrierHeight=70,barrierBoundingPoints=[new Vector(2,35),new Vector(18,34),new Vector(49,21),new Vector(86,17),new Vector(113,6),new Vector(132,1),new Vector(175,0),new Vector(135,11),new Vector(122,16),new Vector(141,19),new Vector(140,25),new Vector(155,25),new Vector(156,40),new Vector(142,41),new Vector(141,47),new Vector(121,51),new Vector(136,57),new Vector(175,70),new Vector(115,66),new Vector(86,52),new Vector(64,52),new Vector(19,35)];for(var i=0;i<barrierBoundingPoints.length;i++)barrierBoundingPoints[i].translate(barriersStartingTopLeftPos.x,0);barrierBoundingBox=new Box(barriersStartingTopLeftPos,barrierWidth,barrierHeight),barrierBounding=new Polygon(barrierBoundingPoints,barriersStartingTopLeftPos,barrierBoundingBox),barrierFrames=["res/Barriers/6.png"],barrier=new ImageObject(barriersStartingTopLeftPos.x,barriersStartingTopLeftPos.y,barrierWidth,barrierHeight,barrierBounding),barrier.flags=[];for(var i=0;i<barrierFrames.length;i++)barrier.addImageFrame(barrierFrames[i]);barrier.flags=["No Rotation","No Y Acceleration"],Barriers.barriersList.push(barrier),barrierWidth=100,barrierHeight=40,barrierBoundingPoints=[new Vector(28,13),new Vector(34,5),new Vector(44,1),new Vector(55,0),new Vector(65,5),new Vector(80,3),new Vector(98,8),new Vector(81,18),new Vector(77,25),new Vector(70,30),new Vector(55,37),new Vector(36,39),new Vector(30,39),new Vector(27,37),new Vector(9,38),new Vector(12,23)];for(var i=0;i<barrierBoundingPoints.length;i++)barrierBoundingPoints[i].translate(barriersStartingTopLeftPos.x,0);barrierBoundingBox=new Box(barriersStartingTopLeftPos,barrierWidth,barrierHeight),barrierBounding=new Polygon(barrierBoundingPoints,barriersStartingTopLeftPos,barrierBoundingBox),barrierFrames=["res/Barriers/7.png"],barrier=new ImageObject(barriersStartingTopLeftPos.x,barriersStartingTopLeftPos.y,barrierWidth,barrierHeight,barrierBounding),barrier.flags=[];for(var i=0;i<barrierFrames.length;i++)barrier.addImageFrame(barrierFrames[i]);barrier.flags=["No Rotation"],Barriers.barriersList.push(barrier),barrierWidth=70,barrierHeight=32,barrierBoundingPoints=[new Vector(8,0),new Vector(25,6),new Vector(40,2),new Vector(54,10),new Vector(58,18),new Vector(69,23),new Vector(67,29),new Vector(45,29),new Vector(16,19),new Vector(2,12),new Vector(1,3)];for(var i=0;i<barrierBoundingPoints.length;i++)barrierBoundingPoints[i].translate(barriersStartingTopLeftPos.x,0);barrierBoundingBox=new Box(barriersStartingTopLeftPos,barrierWidth,barrierHeight),barrierBounding=new Polygon(barrierBoundingPoints,barriersStartingTopLeftPos,barrierBoundingBox),barrierFrames=["res/Barriers/8.png"],barrier=new ImageObject(barriersStartingTopLeftPos.x,barriersStartingTopLeftPos.y,barrierWidth,barrierHeight,barrierBounding),barrier.flags=[];for(var i=0;i<barrierFrames.length;i++)barrier.addImageFrame(barrierFrames[i]);Barriers.barriersList.push(barrier),barrierWidth=40,barrierHeight=149,barrierBoundingPoints=[new Vector(26,3),new Vector(31,56),new Vector(37,64),new Vector(38,145),new Vector(2,145),new Vector(2,67),new Vector(9,55),new Vector(13,0)];for(var i=0;i<barrierBoundingPoints.length;i++)barrierBoundingPoints[i].translate(barriersStartingTopLeftPos.x,0);barrierBoundingBox=new Box(barriersStartingTopLeftPos,barrierWidth,barrierHeight),barrierBounding=new Polygon(barrierBoundingPoints,barriersStartingTopLeftPos,barrierBoundingBox),barrierFrames=["res/Barriers/9.png"],barrier=new ImageObject(barriersStartingTopLeftPos.x,barriersStartingTopLeftPos.y,barrierWidth,barrierHeight,barrierBounding),barrier.flags=[];for(var i=0;i<barrierFrames.length;i++)barrier.addImageFrame(barrierFrames[i]);Barriers.barriersList.push(barrier),barrierWidth=100,barrierHeight=100,barrierBoundingPoints=[new Vector(50,12),new Vector(65,13),new Vector(83,29),new Vector(89,54),new Vector(80,71),new Vector(65,83),new Vector(51,88),new Vector(33,83),new Vector(18,72),new Vector(11,52),new Vector(17,32),new Vector(31,18)];for(var i=0;i<barrierBoundingPoints.length;i++)barrierBoundingPoints[i].translate(barriersStartingTopLeftPos.x,0);barrierBoundingBox=new Box(barriersStartingTopLeftPos,barrierWidth,barrierHeight),barrierBounding=new Polygon(barrierBoundingPoints,barriersStartingTopLeftPos,barrierBoundingBox),barrierFrames=["res/Barriers/10.png"],barrier=new ImageObject(barriersStartingTopLeftPos.x,barriersStartingTopLeftPos.y,barrierWidth,barrierHeight,barrierBounding),barrier.flags=[];for(var i=0;i<barrierFrames.length;i++)barrier.addImageFrame(barrierFrames[i]);Barriers.barriersList.push(barrier),barrierWidth=135,barrierHeight=87,barrierBoundingPoints=[new Vector(33,24),new Vector(59,9),new Vector(74,2),new Vector(134,47),new Vector(128,65),new Vector(102,82),new Vector(70,82),new Vector(56,87),new Vector(32,72),new Vector(9,69),new Vector(1,60),new Vector(17,44),new Vector(20,35),new Vector(27,35)];for(var i=0;i<barrierBoundingPoints.length;i++)barrierBoundingPoints[i].translate(barriersStartingTopLeftPos.x,0);barrierBoundingBox=new Box(barriersStartingTopLeftPos,barrierWidth,barrierHeight),barrierBounding=new Polygon(barrierBoundingPoints,barriersStartingTopLeftPos,barrierBoundingBox),barrierFrames=["res/Barriers/3.png"],barrier=new ImageObject(barriersStartingTopLeftPos.x,barriersStartingTopLeftPos.y,barrierWidth,barrierHeight,barrierBounding),barrier.flags=[];for(var i=0;i<barrierFrames.length;i++)barrier.addImageFrame(barrierFrames[i]);Barriers.barriersList.push(barrier),barrierWidth=135,barrierHeight=87,barrierBoundingPoints=[new Vector(33,24),new Vector(59,9),new Vector(74,2),new Vector(134,47),new Vector(128,65),new Vector(102,82),new Vector(70,82),new Vector(56,87),new Vector(32,72),new Vector(9,69),new Vector(1,60),new Vector(17,44),new Vector(20,35),new Vector(27,35)];for(var i=0;i<barrierBoundingPoints.length;i++)barrierBoundingPoints[i].translate(barriersStartingTopLeftPos.x,0);barrierBoundingBox=new Box(barriersStartingTopLeftPos,barrierWidth,barrierHeight),barrierBounding=new Polygon(barrierBoundingPoints,barriersStartingTopLeftPos,barrierBoundingBox),barrierFrames=["res/Barriers/3.png"],barrier=new ImageObject(barriersStartingTopLeftPos.x,barriersStartingTopLeftPos.y,barrierWidth,barrierHeight,barrierBounding),barrier.flags=[];for(var i=0;i<barrierFrames.length;i++)barrier.addImageFrame(barrierFrames[i]);Barriers.barriersList.push(barrier)}};module.exports=Barriers},function(module,exports,__webpack_require__){var InputClass=__webpack_require__(5),GraphicsContext=__webpack_require__(1),Timer=__webpack_require__(6),Engine={_isPaused:!1,_gameLoop:null,_isResetting:!1,init:function(canvasId){GraphicsContext.init(canvasId),InputClass.init()},reset:function(gameResetFunc){this._isResetting=!0,InputClass.resetClicks(),gameResetFunc(),this._isResetting=!1},start:function(gameMainFunc,interval){interval=interval||1,interval=interval<1?1:interval,this._gameLoop=setInterval(function(){this._isPaused||this._isResetting||(Timer.tick(),gameMainFunc())},interval)},shutdown:function(){clearInterval(this._gameLoop)}};module.exports=Engine},function(module,exports,__webpack_require__){var Vector=__webpack_require__(2),_colliDetectHelper={getEdge:function(v1,v2){return new Vector(v2.x-v1.x,v2.y-v1.y).perp()},flattenPolygonOnAxis:function(poly,axis){for(var proj,minMaxPoints=[new Vector(4294967295,4294967295),new Vector((-4294967295),(-4294967295))],i=0;i<poly.points.length;i++)proj=poly.points[i].project(axis),proj.x<minMaxPoints[0].x&&(minMaxPoints[0]=proj.clone()),proj.x>minMaxPoints[1].x&&(minMaxPoints[1]=proj.clone());return minMaxPoints}},colliDetect={_isSeparatedAxis:function(poly1,poly2,axis){var poly1Proj=_colliDetectHelper.flattenPolygonOnAxis(poly1,axis).map(function(ele){return ele.project(new Vector(1,0))}),poly2Proj=_colliDetectHelper.flattenPolygonOnAxis(poly2,axis).map(function(ele){return ele.project(new Vector(1,0))}),front=poly1Proj,back=poly2Proj;return poly1Proj[0].x<poly2Proj[0].x&&(front=poly2Proj,back=poly1Proj),front[0].x>back[1].x},detect:function(poly1,poly2){return[poly1.points,poly2.points].every(function(points){return points.every(function(ele,i){return!colliDetect._isSeparatedAxis(poly1,poly2,_colliDetectHelper.getEdge(points[i],points[i===points.length-1?0:i+1]))})})}};module.exports=colliDetect},function(module,exports){var Utility={getRandIndex:function(upperbound){return parseInt((Math.random()*upperbound*10+Math.random()*upperbound*10)%upperbound)},getPosiOrNega:function(){var arr=[1,-1];return arr[Utility.getRandIndex(2)]}};module.exports=Utility},function(module,exports,__webpack_require__){var Barriers=__webpack_require__(7),Utility=__webpack_require__(10),GraphicsContext=__webpack_require__(1),BarrierGenerator={_record:0,_level:0,_lastBarrier:null,_lastBarrierIndex:null,_lastBarrierIssueTime:0,_gapFromLastBarrier:0,_setRandSpeedAndRotation:function(barrier,ax,flags){barrier.ax=ax*(1+Math.random()),barrier.ay=ax*(.5*Math.random())*Utility.getPosiOrNega(),barrier.r=10*Math.random(),barrier.dr=Math.random()*Math.random()*.05;for(var i=0;i<flags.length;i++)switch(flags[i]){case"No Rotation":barrier.r=0,barrier.dr=0;break;case"No Y Acceleration":barrier.ay=0;break;case"No X Acceleration":barrier.ax=0}},_getRandY:function(){var randY=528314*Math.random()*Math.random()%GraphicsContext.height();if(null!==this._lastBarrier)for(var lower=this._lastBarrier.y-this._lastBarrier.height,upper=this._lastBarrier.y+this._lastBarrier.heigtt;randY>=lower&&randY<=upper;)randY=528314*Math.random()*Math.random()%GraphicsContext.height();return randY},_getRandGapFromLast:function(){var HARDNESS=1500,randGap=0;if(null!==this._lastBarrier){var base=this._lastBarrier.width,levelDevider=this._level;randGap=base+Math.random()*HARDNESS/levelDevider}return randGap},setLevel:function(record){var points=3e3;this._level=0===parseInt(record/points)?1:record/points},getThisBarrier:function(time,ax){if(null!==this._lastBarrier){var deltaTime=time-this._lastBarrierIssueTime;if(deltaTime*Math.abs(ax)<=this._gapFromLastBarrier)return null}var thisBarrierIndex=Utility.getRandIndex(Barriers.barriersList.length);if(thisBarrierIndex===this._lastBarrierIndex||Barriers.barriersList[thisBarrierIndex].used)return null;var thisBarrier=Barriers.barriersList[thisBarrierIndex];return thisBarrier.used=!0,this._setRandSpeedAndRotation(thisBarrier,ax,thisBarrier.flags),thisBarrier.setY(this._getRandY()),this._gapFromLastBarrier=this._getRandGapFromLast(),this._lastBarrier=thisBarrier,this._lastBarrierIndex=thisBarrierIndex,this._lastBarrierIssueTime=time,thisBarrier},reset:function(){this._record=0,this._level=0,this._lastBarrier=null,this._lastBarrierIndex=null,this._lastBarrierIssueTime=0,this._gapFromLastBarrier=0}};module.exports=BarrierGenerator},function(module,exports,__webpack_require__){var GraphicsContext=__webpack_require__(1),UIClass={_showDarkBackground:function(){GraphicsContext.canvasCtx.fillStyle="rgba(0, 0, 0, 0.7)",GraphicsContext.canvasCtx.fillRect(0,0,GraphicsContext.width(),GraphicsContext.height())},_showText:function(font,baseline,align,style,text,width,height){GraphicsContext.canvasCtx.font=font,GraphicsContext.canvasCtx.textBaseline=baseline,GraphicsContext.canvasCtx.textAlign=align,GraphicsContext.canvasCtx.fillStyle=style,GraphicsContext.canvasCtx.fillText(text,width,height)},showPauseScene:function(){GraphicsContext.save(),this._showDarkBackground(),this._showText("bolder 84px Roboto","middle","center","white","Click to Start",.5*GraphicsContext.width(),.5*GraphicsContext.height()),GraphicsContext.restore()},showLoadingScene:function(){GraphicsContext.save(),this._showDarkBackground(),this._showText("bolder 84px Roboto","middle","center","white","Loading...",.5*GraphicsContext.width(),.5*GraphicsContext.height()),GraphicsContext.restore()},showGameRecord:function(record,high){GraphicsContext.save(),this._showText("bolder 36px Roboto","top","end","white",record,.95*GraphicsContext.width(),.05*GraphicsContext.height()),this._showText("bolder 36px Roboto","top","start","white","Highest: "+high,.05*GraphicsContext.width(),.05*GraphicsContext.height()),GraphicsContext.restore()},showRestartScene:function(high){GraphicsContext.save(),this._showDarkBackground(),this._showText("bolder 48px Roboto","bottom","center","white","Highest: "+high,.5*GraphicsContext.width(),.4*GraphicsContext.height()),this._showText("bolder 84px Roboto","top","center","white","Click to Restart",.5*GraphicsContext.width(),.4*GraphicsContext.height()),GraphicsContext.restore()}};module.exports=UIClass}])});